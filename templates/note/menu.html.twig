{# templates/note/menu.html.twig #}


<div id="menu" class="d-flex align-items-center gap-2 pt-2 pb-2">
    <div class="me-2">
        <div class="dropdown kebab me-2" style="display: inline-block;">
            <button class="btn btn-link p-1 dropdown-toggle" aria-label="Row actions" data-toggle="dropdown">
            <i class="fa fa-ellipsis-v"></i>  <!-- use fa-bars for three lines -->
            </button>
            
            <ul class="dropdown-menu dropdown-menu-end shadow flex-column">

                <li>
                    <div class="d-flex flex-wrap ms-1 me-1 mb-3 mt-2">
                        <!-- Production badge with dark text -->
                        <span role="button" class="badge bg-primary text-white mt-1 ms-2" id="env-prod">Production</span>
                        &nbsp;路&nbsp;

                        <!-- RC/Staging badge with dark text -->
                        <span role="button" class="badge bg-secondary text-white mt-1 ms-2" id="env-rc">RC/Staging</span>
                        &nbsp;路&nbsp;

                        <!-- INT badge with dark text -->
                        <span role="button" class="badge bg-info text-white mt-1 ms-2" id="env-int">INT</span>
                        &nbsp;路&nbsp;

                        <!-- ZELDA badge with dark text -->
                        <span role="button" class="badge bg-warning text-dark mt-1 ms-2" id="env-zelda">ZELDA</span>
                        &nbsp;路&nbsp;

                        <!-- Local badge with white text on a red background -->
                        <span role="button" class="badge bg-danger text-white mt-1 ms-2" id="env-local">Local</span>

                        <span style="display: none;">
                        <b>Current Environment:&nbsp;</b><span id="current-environment">local</span>
                        </span>
                    </div>
                </li>



                <li><hr class="dropdown-divider"></li>
                    
                <li class="">&nbsp;&middot;&nbsp;

                    {% for key, item in menu_data %}
                        {% set popoverHtml %}
                            <div class="custom-popover-body">
                                {% for plink in item.popoverLinks %}
                                    <a href="{{ plink.url }}" target="_blank" rel="noopener noreferrer"><span class="small">{{ plink.text }}</span></a><br>
                                {% endfor %}
                            </div>
                        {% endset %}

                        <a class="popover-link"
                            href="{{ item.url }}"
                            id="menu-{{ key }}"
                            target="_blank"
                            rel="noopener noreferrer"
                            data-bs-content="{{ popoverHtml|e('html_attr') }}"
                            data-bs-placement="bottom"
                            data-bs-trigger="manual"
                            data-bs-html="true"
                            >
                                <span class="ms-2 small me-1">{{ item.text }}</span>
                        </a>

                        {% if not loop.last %}&nbsp;&middot;&nbsp;{% endif %}
                    {% endfor %}

                </li>

                <li><hr class="dropdown-divider"></li>
            
                <li class="nav-item">
                    <div class="nav-heading bg-secondary text-white text-uppercase fw-bold p-2 mb-2 rounded small d-flex">
                        <img class="img-thumbnail" src="/assets/img/tripadvisor-4.png" style="max-width:45px; height:25px;">
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://www.myworkday.com/tripadvisor/d/home.htmld" target="_blank" rel="noopener noreferrer">Workday</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://us-east-1.signin.aws.amazon.com/platform/login?workflowStateHandle=ab9985cc-6293-47fc-beeb-a3036763a40f" target="_blank" rel="noopener noreferrer">AWS</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://myapplications.microsoft.com/" target="_blank" rel="noopener noreferrer">SSO</a>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-heading bg-info text-white text-uppercase fw-bold p-2 mb-2 rounded small d-flex">
                        <img class="img-thumbnail" src="/assets/img/jira_cloud.png" style="max-width:45px; height:25px;">
                        <span class="ms-4 small py-1 font-weight-bold">Bug</span> 
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://viatorinc.atlassian.net/secure/CreateIssueDetails!init.jspa?pid=10089&amp;issuetype=10040&amp;reporter=712020%3A54173f2a-ea63-495a-8431-1cdae42a7b45&amp;priority=10002&amp;customfield_10390=12279&amp;labels=vs-tools" target="_blank" rel="noopener noreferrer"> New</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://viatorinc.atlassian.net/secure/CreateIssueDetails!init.jspa?pid=10089&amp;issuetype=10040&amp;parent=APPSUP-7761&amp;reporter=712020%3A54173f2a-ea63-495a-8431-1cdae42a7b45&amp;priority=10002&amp;customfield_10390=12279&amp;labels=vs-tools" target="_blank" rel="noopener noreferrer"> KTLO</a>
                        &nbsp;|&nbsp;<span class="ms-4 small py-1 font-weight-bold">Task</span>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://viatorinc.atlassian.net/secure/CreateIssueDetails!init.jspa?pid=10089&amp;issuetype=10037&amp;reporter=712020%3A54173f2a-ea63-495a-8431-1cdae42a7b45&amp;priority=10002&amp;customfield_10390=12279&amp;labels=vs-tools" target="_blank" rel="noopener noreferrer"> New</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://viatorinc.atlassian.net/secure/CreateIssueDetails!init.jspa?pid=10089&amp;issuetype=10037&amp;parent=APPSUP-7761&amp;reporter=712020%3A54173f2a-ea63-495a-8431-1cdae42a7b45&amp;priority=10002&amp;customfield_10390=12279&amp;labels=vs-tools" target="_blank" rel="noopener noreferrer"> KTLO</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="viatorinc-sandbox-973.atlassian.net" target="_blank" rel="noopener noreferrer"> RC</a>

                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-heading bg-success text-white text-uppercase fw-bold p-2 mb-2 rounded small d-flex">Gitlab &nbsp;路&nbsp; 
                        <a class="nav-link nav-dot py-1 text-white small font-weight-bold" href="https://viatorinc.atlassian.net/wiki/spaces/ENGHAND/pages/69207537/How+to+rollback+a+release" target="_blank" rel="noopener noreferrer"> Rollback_Page</a>
                    </div>
                    
                    <div class="d-flex btn-dotted ">
                        &nbsp;<span class="py-1 small text-black me-2"><a href="https://gitlab.com/viator/engineering/app-support/php-common" target="_blank" rel="noopener noreferrer">php-common</a></span>
                        &nbsp;::&nbsp;<a class="nav-dot py-1 small ms-2" href="https://gitlab.com/viator/engineering/app-support/php-common/-/tree/staging?ref_type=heads" target="_blank" rel="noopener noreferrer" >staging</a>&nbsp;-&nbsp;<span class="py-1 small hover-cursor" id="php-common_staging"></span>
                        &nbsp;::&nbsp;<a class="nav-dot py-1 small ms-2" href="https://gitlab.com/viator/engineering/app-support/php-common/-/tree/prod?ref_type=heads" target="_blank" rel="noopener noreferrer">prod</a>&nbsp;-&nbsp;<span class="py-1 small hover-cursor" id="php-common_prod"></span>
                    </div>
                    <div class="d-flex">
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 small" href="https://gitlab.com/viator/engineering/app-support" target="_blank" rel="noopener noreferrer">Team</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 small" href="https://gitlab.com/viator/engineering" target="_blank" rel="noopener noreferrer">engineering</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 small" href="https://gitlab.com/viator/infrastructure" target="_blank" rel="noopener noreferrer">Ops</a>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-heading bg-danger text-white text-uppercase fw-bold p-2 mb-2 rounded small d-flex">
                        VAULT
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small" href="#" onclick="goToLink(this, \'s.5qBgJbk5v1WgQUfGjDBTgOEk\')" title="https://vault.common.int.viator.com/ui/vault/auth?with=token">INT</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 text-white small" href="https://confluence.viator.com/pages/viewpage.action?spaceKey=TO&amp;title=Adding+secrets+into+Vault" target="_blank" rel="noopener noreferrer">Confluence</a>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-heading bg-warning text-uppercase fw-bold p-2 mb-1 rounded small">
                        <div class="d-flex">
                            Jenkins (Home)
                            &nbsp;路&nbsp;<a class="nav-link nav-dot py-1  small" href="https://jenkins.prod.viatorsystems.com/" target="_blank" rel="noopener noreferrer">PROD</a>  
                            &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 small" href="https://avrdevjenkins00n.ndmad2.tripadvisor.com/" target="_blank" rel="noopener noreferrer">Team</a>
                        </div>
                        <div class="d-flex mt-2">
                            Jenkins (Self Service)
                            &nbsp;路&nbsp;<a class="nav-link nav-dot py-1  small" href="https://jenkins.prod.viatorsystems.com/job/Infrastructure/job/Vault/job/vault-self-service-prod/" target="_blank" rel="noopener noreferrer">PROD</a> 
                            &nbsp;路&nbsp;<a class="nav-link nav-dot py-1  small" href="https://jenkins.prod.viatorsystems.com/job/Infrastructure/job/Vault/job/vault-self-service-rc/" target="_blank" rel="noopener noreferrer">RC</a>
                        </div>
                        <div class="d-flex mt-2">
                            Jenkins (Restart)
                            &nbsp;路&nbsp;<a href="https://jenkins.prod.viatorsystems.com/job/Apps/job/rolling-restart/" target="_blank" rel="noopener noreferrer">Restart Server</a>
                            &nbsp;&middot;&nbsp;<a href="https://avrdevjenkins00n.ndmad2.tripadvisor.com/user/scorreia/search/?q=restart&Jenkins-Crumb=e8f1004659cebafcd47a39babc186e3fdd3b6e7ea2921fff2318ce09cfd6e214" target="_blank" rel="noopener noreferrer">Restart Server (Team)</a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <div class="nav-heading bg-light text-uppercase fw-bold p-2 mb-2 rounded small d-flex">
                        Salesforce
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 small" href="https://attractions.my.salesforce.com/" target="_blank" rel="noopener noreferrer">PROD</a>
                        &nbsp;路&nbsp;<a class="nav-link nav-dot py-1 small" href="https://test.salesforce.com/" target="_blank" rel="noopener noreferrer">Test</a>
                    </div>
                </li>

            </ul>
        </div>
    </div>
    
    <div class="me-2"><a href="https://viatorinc.atlassian.net/jira/people/712020:54173f2a-ea63-495a-8431-1cdae42a7b45/work" target="_blank" rel="noopener noreferrer"><span style="font-size:14px;position:relative;top:1px;"></span></a> </div>
    <div class="me-2"><a href="https://docs.google.com/spreadsheets/d/166y6wL-nuuf7ukNbA4lgmdQVsQbgZ4P_bZfhUjRJe1Y/edit#gid=0" target="_blank" rel="noopener noreferrer"><span style="font-size:24px;position:relative;top:-2px;"></span></a> </div>
    <div class="me-2"><a href="http://app-support.local.viatorsystems.com/_chen/testToolDebug.html" target="_blank" rel="noopener noreferrer"><img src="/assets/img/tool-home-page.png" width="30px" height="30px"></a></div>

    {# Emoji list #}
    <select id="emojiSelect" class="form-control me-2" style="width: 170px">
        <option value=""></option>
        {% for emoji in emojis_data %}
            <option value="{{ emoji.value|e }}" data-type="{{ emoji.type|e }}" data-label="{{ emoji.label|e }}">
                {{ emoji.label|e }}
            </option>
        {% endfor %}
    </select>

    <div class="ms-2">
        <button id="add_new_note" class="badge bg-success even-larger-badge me-2" style="font-size: 1rem; padding: 0.5em 1em; border-radius: 1.25rem;">Add New</button>&nbsp;
    </div>

    {# Note status dropdown list #}
    <div>
        <div class="d-flex flex-wrap align-items-center gap-2 my-2">
            <select id="statusOption" name="note_status" class="form-control me-1 select2-hidden-accessible" style="width: 140px;" data-select2-id="select2-data-statusOption" tabindex="-1" aria-hidden="true">
            {% for status, options in status_data %}
                <option 
                    data-url="{{ options.url }}" 
                    data-icon="{{ options.icon }}" 
                    data-color="{{ options.color }}"
                >
                    {{ options.text }}
                </option>
            {% endfor %}
            </select>        
        </div>
    </div>

    <div class="me-2">
        <span>&nbsp;|&nbsp;</span><a href="https://chatgpt.com/" target="_blank" rel="noopener noreferrer"><img src="/assets/img/chatgpt-icon.png" width="35px" height="35px"></a>
    </div>

    <div><span>&nbsp;|&nbsp;</span><input type="checkbox" name="include" data-url="?"><span> Include_all</span></div>

    <div class="ms-auto d-flex align-items-center">

        {# include stock partial and pass stock_data #}
        {% include 'note/stock.html.twig' with {'stockInfo': stock_data['stockInfo']} %}

        <span class="hover-shortcut-text text-sm">
            <button class="badge bg-success even-larger-badge small-badge ms-2" type="button"><i class="fas fa-copy"></i></button>
            <div class="hover-shortcut-tooltip">
                <ul>
                    {% for key, command in copy_command_data %}
                        <li data-copy="{{ command.copy_value }}">{{ command.text }}</li>
                    {% endfor %}
                </ul>
            </div>            
        </span>
        
        <span id="tabCounter" class="ms-1 text-lg-center"></span>
            <button class="badge bg-danger even-larger-badge small-badge ms-2" type="button" onclick="copyToClipboard('{{ ta_sso_pwd }}');"><i class="fas fa-key"></i></button>
        <span id="tabCounter" class="ms-1 text-lg-center ms-auto"></span>
        <button class="badge bg-danger even-larger-badge small-badge ms-2" type="button" id="jiraSearch" onclick="closeAllNewOpenedWindows();"><i class="fas fa-times"></i></button>
    </div>

</div>

{# Add new note form #}
<div class="mb-5" id="addNewNoteForm" style="display:none;">    
    <div class="row">
            <!-- Left column -->
        <div class="col-md-2 d-flex flex-column">
            <div id="note_div_id" class="mb-3">
                <input class="form-control text-uppercase" type="search" placeholder="Add new note id here" aria-label="Search" id="note_id" style="position: sticky; top: 0; z-index: 10;">
            </div>
            <div id="actions">
                <div class="d-flex align-items-center">
                    <button class="btn btn-dotted btn-sm" id="saveNote" style="border: 1px dotted red;">Save Note</button>
                    <div class="ms-3">
            <div class="form-check form-check-inline me-3">
                <input class="form-check-input" type="radio" name="note_status" id="statusOpen" value="Open">
                <label class="form-check-label small" for="statusOpen">
                    <i class="fa fa-hourglass-half" style="color: blue;" data-toggle="tooltip" title="Status::Open"></i>
                </label>
            </div>
            <div class="form-check form-check-inline me-3">
                <input class="form-check-input" type="radio" name="note_status" id="statusResolved" value="Resolved">
                <label class="form-check-label small" for="statusResolved">
                    <i class="fa fa-check-circle" style="color: green;" data-toggle="tooltip" title="Status::Resolved"></i>
                </label>
            </div>
            <div class="form-check form-check-inline me-3">
                <input class="form-check-input" type="radio" name="note_status" id="statusProcessing" value="Processing">
                <label class="form-check-label small" for="statusProcessing">
                    <i class="fa fa-spinner fa-spin" style="color: darkcyan;" data-toggle="tooltip" title="Status::Processing"></i>
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="radio" name="note_status" id="statusWaiting" value="Follow">
                <label class="form-check-label small" for="statusWaiting">
                    <i class="fa fa-eye" style="color: indigo;" data-toggle="tooltip" title="Status::Follow"></i>
                </label>
            </div>
        </div>
                </div>
            </div>
        </div>
            <!-- Right column -->
        <div class="col-md-10">
            <div id="div2">
                <textarea id="note_text" class="form-control pr-5" rows="20" placeholder="Your note.."></textarea>
            </div>
        </div>
    </div>
</div>