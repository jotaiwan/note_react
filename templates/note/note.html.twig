{# templates/note/note.html.twig #}

<table class="table table-bordered table-sm table-hover mt-3">
    <thead>
        <tr>
            <th style="width:180px;">Ticket</th>
            <th style="width:80px;">Status</th>
            <th style="width:110px;">Note_Count</th>
            <th style="width:220px;">Note_Date</th>
            <th>Note (4 click to make editable)</th>
        </tr>
    </thead>

<tbody>
{% for ticket, notes in note_data %}
    {% set count = notes|length %}

    {% for note in notes %}
        <tr class="group-{{ ticket }}" data-row-id="{{ note.rowId }}">

            {% if loop.first %}
                <td rowspan="{{ count }}" class="fixed-date-col align-top">
                    <a href="https://viatorinc.atlassian.net/browse/{{ ticket }}"
                       target="_blank" rel="noopener noreferrer">
                        {{ ticket }}
                    </a>

                    <span class="ml-2">
                        <i class="fa fa-copy" data-text="{{ ticket }}" style="cursor:pointer;"></i>
                    </span>
                    <span class="ml-2">
                        <i class="fas fa-minus toggle-ticket" data-text="{{ ticket }}" style="cursor:pointer;"></i>
                    </span>
                </td>

                <td rowspan="{{ count }}" class="text-center">
                    <i class="fa fa-spinner fa-spin"
                       style="color:darkcyan;"
                       data-toggle="tooltip"
                       title="Status::{{ note.status }}">
                    </i>
                </td>

                <td rowspan="{{ count }}" class="align-top text-center">
                    {{ count }}
                </td>
            {% endif %}

            <td class="fixed-date-col date-cell small">
                {% if note.date.ETC_GMT7 is defined %}
                    üåê {{ note.date.ETC_GMT7 }}<br>
                {% endif %}
                {% if note.date.SYD is defined %}
                    ü¶ò {{ note.date.SYD }}
                {% endif %}
            </td>

            <td class="editable note">
                {{ note.note|raw }}
            </td>
        </tr>
    {% endfor %}
{% endfor %}
</tbody>

</table>
